## üõ°Ô∏è –ó–∞—â–∏—Ç–Ω–∏–∫–∏ —Ç–∏–ø–∞ (Type Guards)

**Type guards –≤ TypeScript** ‚Äî —ç—Ç–æ –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–º–æ–≥–∞—é—Ç —Å—É–∑–∏—Ç—å –æ–±—ä–µ–¥–∏–Ω—ë–Ω–Ω—ã–π —Ç–∏–ø.

–î—Ä—É–≥–∏–º–∏ —Å–ª–æ–≤–∞–º–∏, —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω –º–µ—Ö–∞–Ω–∏–∑–º, –ø–æ–∑–≤–æ–ª—è—é—â–∏–π —Å –ø–æ–º–æ—â—å—é –≤—ã—Ä–∞–∂–µ–Ω–∏–π —Å–æ—Å—Ç–∞–≤–∏—Ç—å –ª–æ–≥–∏—á–µ—Å–∫–∏–µ —É—Å–ª–æ–≤–∏—è, –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–≤ –∫–æ—Ç–æ—Ä—ã–µ, –≤—ã–≤–æ–¥ —Ç–∏–ø–æ–≤ —Å–º–æ–∂–µ—Ç —Å—É–∑–∏—Ç—å –¥–∏–∞–ø–∞–∑–æ–Ω —Ç–∏–ø–æ–≤ –¥–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–≥–æ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π –Ω–∞–¥ –∑–Ω–∞—á–µ–Ω–∏–µ–º.

---

### üîπ –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∏–ø—ã –∑–∞—â–∏—Ç–Ω–∏–∫–æ–≤:

#### 1. **`typeof`** ‚Äî –¥–ª—è –ø—Ä–∏–º–∏—Ç–∏–≤–æ–≤

```ts
function isString(value: unknown): value is string {
  return typeof value === 'string';
}

if (isString(value)) {
  value.toUpperCase(); // ‚úÖ TypeScript –∑–Ω–∞–µ—Ç, —á—Ç–æ value - string
}
```

#### 2. **`instanceof`** ‚Äî –¥–ª—è –∫–ª–∞—Å—Å–æ–≤

```ts
if (error instanceof Error) {
  error.message; // ‚úÖ TypeScript –∑–Ω–∞–µ—Ç, —á—Ç–æ error - Error
}
```

#### 3. **`in`** ‚Äî –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–≤–æ–π—Å—Ç–≤

```ts
type Dog = { bark: () => void };
type Cat = { meow: () => void };

function isDog(animal: Dog | Cat): animal is Dog {
  return 'bark' in animal;
}

if (isDog(animal)) {
  animal.bark(); // ‚úÖ TypeScript –∑–Ω–∞–µ—Ç, —á—Ç–æ animal - Dog
}
```

#### 4. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏-–ø—Ä–µ–¥–∏–∫–∞—Ç—ã**

```ts
function isUser(obj: unknown): obj is User {
  return (
    typeof obj === 'object' &&
    obj !== null &&
    'id' in obj &&
    'name' in obj
  );
}

if (isUser(data)) {
  console.log(data.name); // ‚úÖ TypeScript –∑–Ω–∞–µ—Ç —Ç–∏–ø
}
```

---

### üéØ –ó–∞—á–µ–º –Ω—É–∂–Ω—ã:

–ß—Ç–æ–±—ã –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä –ø–æ–Ω–∏–º–∞–ª, —Å –∫–∞–∫–∏–º –∏–º–µ–Ω–Ω–æ —Ç–∏–ø–æ–º –º—ã —Ä–∞–±–æ—Ç–∞–µ–º –∏–∑ union —Ç–∏–ø–∞, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ.

---

### üí° –ü—Ä–∏–º–µ—Ä:

```ts
function processValue(value: string | number) {
  if (typeof value === 'string') {
    // TypeScript –∑–Ω–∞–µ—Ç, —á—Ç–æ value - string
    return value.toUpperCase();
  } else {
    // TypeScript –∑–Ω–∞–µ—Ç, —á—Ç–æ value - number
    return value * 2;
  }
}
```

---

## üî® Type Assertions (–£—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —Ç–∏–ø–æ–≤)

**Type Assertions** –ø–æ–∑–≤–æ–ª—è—é—Ç —è–≤–Ω–æ —É–∫–∞–∑–∞—Ç—å –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä—É —Ç–∏–ø –¥–∞–Ω–Ω—ã—Ö. –í –æ—Ç–ª–∏—á–∏–µ –æ—Ç type guards, –æ–Ω–∏ –Ω–µ –ø—Ä–æ–≤–µ—Ä—è—é—Ç —Ç–∏–ø –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è ‚Äî –≤—ã –ø—Ä–æ—Å—Ç–æ –≥–æ–≤–æ—Ä–∏—Ç–µ TypeScript, —á—Ç–æ –∑–Ω–∞–µ—Ç–µ —Ç–∏–ø.

### **–°–∏–Ω—Ç–∞–∫—Å–∏—Å:**

```ts
// –°–ø–æ—Å–æ–± 1: as (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
const value = someValue as string;

// –°–ø–æ—Å–æ–± 2: —É–≥–ª–æ–≤—ã–µ —Å–∫–æ–±–∫–∏ (–Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ JSX)
const value = <string>someValue;
```

### **–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**

#### **1. –†–∞–±–æ—Ç–∞ —Å DOM:**

```ts
const input = document.getElementById('username') as HTMLInputElement;
input.value = 'John'; // ‚úÖ TypeScript –∑–Ω–∞–µ—Ç —Ç–∏–ø

// –ë–µ–∑ assertion:
const input2 = document.getElementById('username');
// input2.value // ‚ùå –û—à–∏–±–∫–∞ - –º–æ–∂–µ—Ç –±—ã—Ç—å null
```

#### **2. –†–∞–±–æ—Ç–∞ —Å unknown:**

```ts
const data: unknown = getData();
const user = data as User; // –£—Ç–≤–µ—Ä–∂–¥–∞–µ–º, —á—Ç–æ —ç—Ç–æ User
```

#### **3. –î–≤–æ–π–Ω–æ–µ —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ (Double Assertion):**

```ts
const value: any = "hello";
const num = value as unknown as number; // –°–Ω–∞—á–∞–ª–∞ –≤ unknown, –ø–æ—Ç–æ–º –≤ number
```

**‚ö†Ô∏è –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ—Å—Ç—å—é** ‚Äî –¥–≤–æ–π–Ω–æ–µ —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –æ–±—Ö–æ–¥–∏—Ç –ø—Ä–æ–≤–µ—Ä–∫—É —Ç–∏–ø–æ–≤.

---

## üîÑ –†–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É Type Guards –∏ Type Assertions

| –ü–∞—Ä–∞–º–µ—Ç—Ä | Type Guards | Type Assertions |
|----------|-------------|-----------------|
| **–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è** | ‚úÖ –î–∞ | ‚ùå –ù–µ—Ç |
| **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** | ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ | ‚ö†Ô∏è –ù–µ–±–µ–∑–æ–ø–∞—Å–Ω–æ (–µ—Å–ª–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ) |
| **–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å** | –ö–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–∏–ø | –ö–æ–≥–¥–∞ —Ç–æ—á–Ω–æ –∑–Ω–∞–µ—Ç–µ —Ç–∏–ø |
| **–°–∏–Ω—Ç–∞–∫—Å–∏—Å** | `value is Type` | `value as Type` |

### **–ü—Ä–∏–º–µ—Ä —Ä–∞–∑–Ω–∏—Ü—ã:**

```ts
// Type Guard - –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç–∏–ø
function isString(value: unknown): value is string {
  return typeof value === 'string';
}

if (isString(value)) {
  value.toUpperCase(); // ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ - —Ç–∏–ø –ø—Ä–æ–≤–µ—Ä–µ–Ω
}

// Type Assertion - –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç–∏–ø
const str = value as string;
str.toUpperCase(); // ‚ö†Ô∏è –ú–æ–∂–µ—Ç —É–ø–∞—Å—Ç—å, –µ—Å–ª–∏ value –Ω–µ string
```

---

## üéØ –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### **Type Guards:**
- –ö–æ–≥–¥–∞ —Ç–∏–ø –Ω–µ–∏–∑–≤–µ—Å—Ç–µ–Ω –∏ –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å
- –ü—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å `unknown` –∏–ª–∏ union —Ç–∏–ø–∞–º–∏
- –ö–æ–≥–¥–∞ –Ω—É–∂–Ω–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

### **Type Assertions:**
- –ö–æ–≥–¥–∞ —Ç–æ—á–Ω–æ –∑–Ω–∞–µ—Ç–µ —Ç–∏–ø (–Ω–∞–ø—Ä–∏–º–µ—Ä, DOM —ç–ª–µ–º–µ–Ω—Ç—ã)
- –ü—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –±–∏–±–ª–∏–æ—Ç–µ–∫–∞–º–∏ –±–µ–∑ —Ç–∏–ø–æ–≤
- –ö–æ–≥–¥–∞ TypeScript –Ω–µ –º–æ–∂–µ—Ç –≤—ã–≤–µ—Å—Ç–∏ —Ç–∏–ø, –Ω–æ –≤—ã –∑–Ω–∞–µ—Ç–µ –µ–≥–æ

---

## üéØ –ö—Ä–∞—Ç–∫–∏–π –æ—Ç–≤–µ—Ç –¥–ª—è —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏—è

**Type Guards** ‚Äî –ø—Ä–æ–≤–µ—Ä—è—é—Ç —Ç–∏–ø –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∏ —Å—É–∂–∞—é—Ç —Ç–∏–ø (`value is Type`). **Type Assertions** ‚Äî —è–≤–Ω–æ —É–∫–∞–∑—ã–≤–∞—é—Ç —Ç–∏–ø –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä—É –±–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏ (`value as Type`). –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ guards –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏, assertions ‚Äî –∫–æ–≥–¥–∞ —Ç–æ—á–Ω–æ –∑–Ω–∞–µ—Ç–µ —Ç–∏–ø.

---

## ‚ùì –ö–∞–≤–µ—Ä–∑–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã –∏ –æ—Ç–≤–µ—Ç—ã

### **1. –í —á–µ–º —Ä–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É Type Guard –∏ Type Assertion?**

**–û—Ç–≤–µ—Ç:**
- **Type Guard** –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç–∏–ø –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∏ —Å—É–∂–∞–µ—Ç —Ç–∏–ø –±–µ–∑–æ–ø–∞—Å–Ω–æ
- **Type Assertion** –ø—Ä–æ—Å—Ç–æ –≥–æ–≤–æ—Ä–∏—Ç –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä—É —Ç–∏–ø, –Ω–µ –ø—Ä–æ–≤–µ—Ä—è—è –µ–≥–æ

```ts
// Guard - –ø—Ä–æ–≤–µ—Ä—è–µ—Ç
if (isString(value)) {
  value.toUpperCase(); // ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ
}

// Assertion - –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç
const str = value as string;
str.toUpperCase(); // ‚ö†Ô∏è –ú–æ–∂–µ—Ç —É–ø–∞—Å—Ç—å
```

---

### **2. –ú–æ–∂–Ω–æ –ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Type Assertion –≤–º–µ—Å—Ç–æ Type Guard?**

**–û—Ç–≤–µ—Ç:**
–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏ –¥–∞, –Ω–æ **–Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è**. Assertion –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç–∏–ø –∏ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –æ—à–∏–±–∫–∞–º –≤ runtime:

```ts
// ‚ùå –ù–µ–±–µ–∑–æ–ø–∞—Å–Ω–æ
const value: unknown = 123;
const str = value as string;
str.toUpperCase(); // –û—à–∏–±–∫–∞ –≤ runtime!

// ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ
if (typeof value === 'string') {
  value.toUpperCase(); // OK
}
```

---

### **3. –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–≤–æ–π–Ω–æ–µ —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ?**

**–û—Ç–≤–µ—Ç:**
–î–≤–æ–π–Ω–æ–µ —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ (`as unknown as Type`) –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å –º–µ–∂–¥—É –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º—ã–º–∏ —Ç–∏–ø–∞–º–∏:

```ts
const value: any = "hello";
const num = value as unknown as number; // any ‚Üí unknown ‚Üí number
```

**‚ö†Ô∏è –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ** ‚Äî —ç—Ç–æ –æ–±—Ö–æ–¥–∏—Ç –ø—Ä–æ–≤–µ—Ä–∫—É —Ç–∏–ø–æ–≤.

---

### **4. –†–∞–±–æ—Ç–∞–µ—Ç –ª–∏ Type Guard –≤ runtime?**

**–û—Ç–≤–µ—Ç:**
–î–∞, type guard ‚Äî —ç—Ç–æ —Ä–µ–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:

```ts
function isString(value: unknown): value is string {
  return typeof value === 'string'; // –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤ runtime
}

if (isString(value)) {
  // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ—à–ª–∞ –≤ runtime
  value.toUpperCase();
}
```

---

### **5. –ú–æ–∂–Ω–æ –ª–∏ —Å–æ–∑–¥–∞—Ç—å Type Guard –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ç–∏–ø–æ–≤?**

**–û—Ç–≤–µ—Ç:**
–î–∞, –º–æ–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ç–∏–ø–æ–≤:

```ts
function isStringOrNumber(value: unknown): value is string | number {
  return typeof value === 'string' || typeof value === 'number';
}

if (isStringOrNumber(value)) {
  // value: string | number
}
```

---

## üìö –ü–æ–ª–µ–∑–Ω—ã–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

- **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Type Guards** –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–∏–ø–æ–≤ –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Type Assertions** —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ —Ç–æ—á–Ω–æ –∑–Ω–∞–µ—Ç–µ —Ç–∏–ø
- **–ò–∑–±–µ–≥–∞–π—Ç–µ –¥–≤–æ–π–Ω—ã—Ö —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–π** ‚Äî –æ–Ω–∏ –æ–±—Ö–æ–¥—è—Ç –ø—Ä–æ–≤–µ—Ä–∫—É —Ç–∏–ø–æ–≤
- **–ü—Ä–µ–¥–ø–æ—á–∏—Ç–∞–π—Ç–µ `as` —Å–∏–Ω—Ç–∞–∫—Å–∏—Å** –≤–º–µ—Å—Ç–æ —É–≥–ª–æ–≤—ã—Ö —Å–∫–æ–±–æ–∫ (—Å–æ–≤–º–µ—Å—Ç–∏–º–æ —Å JSX)
- **–ö–æ–º–±–∏–Ω–∏—Ä—É–π—Ç–µ** guards –∏ assertions –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Å —Ç–∏–ø–∞–º–∏
