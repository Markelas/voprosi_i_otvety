# Git Flow

## Краткий ответ для собеседования

**Git Flow** — модель ветвления в Git с двумя основными ветками: **main** (продакшен) и **develop** (интеграция), плюс вспомогательные: **feature**, **release**, **hotfix**. Фичи разрабатываются в ветках от `develop`, сливаются в `develop`, релизы готовятся в ветках `release` от `develop`, хотфиксы — от `main` и обратно в `main` и `develop`. Цель: чёткое разделение стадий разработки, предсказуемые релизы, безопасные хотфиксы.

---

## Что такое Git Flow

**Git Flow** — веточная модель, предложенная Винсентом Дриссеном. В ней **постоянно существуют две основные ветки** и используются **короткоживущие ветки** под задачи: фичи, релизы, срочные правки.

Идея: не пушить в прод напрямую, всё попадает в прод через ветки **release** или **hotfix**.

---

## Основные ветки (постоянные)

### 1. `main` (или `master`)

- **Назначение:** код, который уже в **продакшене**.
- **Правило:** в `main` попадает только проверенный, зарелизенный код.
- **Теги:** на каждый релиз обычно вешают тег (`v1.0.0`, `v1.1.0`).

### 2. `develop`

- **Назначение:** интеграционная ветка для **текущей разработки**.
- **Правило:** сюда мержат готовые фичи и все изменения, которые должны войти в следующий релиз.
- Состояние `develop` — «то, что будет в следующем релизе».

---

## Вспомогательные ветки (временные)

### 1. Feature (фича)

- **Откуда:** ответвляется от `develop`.
- **Куда мержится:** обратно в `develop`.
- **Имя:** `feature/<название>`, например `feature/auth`, `feature/cart`.

**Жизненный цикл:**

1. Ответвиться от актуальной `develop`.
2. Разрабатывать фичу в своей ветке.
3. Мержить в `develop` (часто через merge request / pull request).
4. Ветку можно удалить после мержа.

**Пример:**  
`feature/login` → готово → merge в `develop` → удалить `feature/login`.

---

### 2. Release (релиз)

- **Откуда:** от `develop`, когда набор фич готов к релизу.
- **Куда мержится:** в `main` и в `develop`.
- **Имя:** `release/<версия>`, например `release/1.2.0`.

**Жизненный цикл:**

1. Создать `release/1.2.0` от `develop`.
2. В этой ветке — только правки багов и метаданных релиза (версия, CHANGELOG). Новые фичи — не сюда.
3. После стабилизации — merge в `main`, поставить тег (`v1.2.0`).
4. Обязательно merge в `develop`, чтобы не потерять правки.
5. Удалить ветку `release/1.2.0`.

**Зачем:** отдельное место для «дожима» версии без остановки разработки в `develop`.

---

### 3. Hotfix (срочный фикс)

- **Откуда:** от `main` (от тега или текущего состояния прода).
- **Куда мержится:** в `main` и в `develop`.
- **Имя:** `hotfix/<описание>`, например `hotfix/security-patch`, `hotfix/1.2.1`.

**Жизненный цикл:**

1. Создать `hotfix/1.2.1` от `main`.
2. Внести минимальные изменения, исправить баг.
3. Мержить в `main`, поставить тег (`v1.2.1`).
4. Мержить в `develop`, чтобы тот же фикс не «затерялся» в следующих релизах.
5. Удалить ветку `hotfix/1.2.1`.

**Зачем:** быстрый патч прода без смешивания с незаконченными фичами в `develop`.

---

## Схема потока

```
main     ----●--------●--------●--------●----  (релизы, теги)
              \      / \      / \      /
release        \----/   \----/   \----/       (release/1.0, 1.1, 1.2)
                    \      /
develop   -----------●------●------●------●----  (интеграция)
                    ↑      ↑      ↑
feature             │      │      │            (feature/a, b, c)
                    └------┴------┘

hotfix    (ответвляется от main, мержится в main и develop)
```

- **Фичи** всегда начинаются и заканчиваются в `develop`.
- **Релизы** ветвятся от `develop`, попадают в `main` и обратно в `develop`.
- **Хотфиксы** — от `main`, назад в `main` и в `develop`.

---

## Правила в одном списке

1. В **main** — только код из релизов и хотфиксов, не коммитить «с руки».
2. **develop** — единая интеграционная ветка для следующего релиза.
3. **Фичи** — только от `develop`, мерж только в `develop`.
4. **Release** — только от `develop`, мерж в `main` и в `develop`.
5. **Hotfix** — только от `main`, мерж в `main` и в `develop`.
6. После мержа временные ветки (feature/release/hotfix) обычно удаляются.

---

## Плюсы Git Flow

- **Понятные роли веток** — по названию видно, что за ветка и куда она ведёт.
- **Чистая main** — в продакшене только то, что прошло через release или hotfix.
- **Удобные хотфиксы** — срочный фикс не тянет за собой незаконченные фичи.
- **Подходит под версионные релизы** — теги на main соответствуют версиям в проде.

---

## Минусы Git Flow

- **Много веток** — сложнее для маленьких команд и простых проектов.
- **Долгий путь до прода** — фича идёт: develop → release → main.
- **Два «центральных» ствола** — main и develop нужно синхронизировать и понимать.
- **Обычно избыточен для простого CI/CD** — при деплое с каждой ветки или при trunk-based разработке проще обход без полного Git Flow.

---

## Когда уместен Git Flow

- Есть **версионные релизы** (v1.0, v1.1, v2.0).
- Нужны **релиз-ветки** под стабилизацию и тестирование.
- Часто нужны **хотфиксы** в прод без переноса туда незаконченных фич.
- Несколько человек/команд ведут разработку параллельно.

---

## Альтернативы

| Модель | Суть | Когда удобна |
|--------|------|----------------|
| **Git Flow** | main + develop, feature/release/hotfix | Версионные релизы, классический процесс |
| **GitHub Flow** | По сути только main + feature-ветки под задачи | Простой деплой, один «продакшен», частые релизы |
| **GitLab Flow** | main + ветки под окружения (staging, preprod) и/или по окружениям | Нужны staging/preprod без усложнения Git Flow |
| **Trunk-Based** | Одна ветка (trunk), короткоживущие ветки, частые мержи в trunk | CI/CD «с каждой коммита», очень частые деплои |

**GitHub Flow:** почти нет отдельной «develop», фичи мержатся в `main`, прод = `main`.  
**Trunk-Based:** минимум веток, акцент на частой интеграции в одну основную ветку.

---

## Вопросы на собеседовании

| Вопрос | Краткий ответ |
|--------|----------------|
| Что такое Git Flow? | Модель ветвления с main (прод), develop (интеграция) и ветками feature, release, hotfix |
| Какие ветки постоянные? | `main` — прод, `develop` — текущая разработка |
| Откуда создаётся feature? | От `develop`, мержится обратно в `develop` |
| Откуда создаётся release? | От `develop`, мержится в `main` и в `develop` |
| Откуда создаётся hotfix? | От `main`, мержится в `main` и в `develop` |
| Зачем мержить hotfix в develop? | Чтобы фикс не потерялся в следующих релизах |
| В чём минус Git Flow? | Много веток, дольше путь до прода; для простых проектов часто избыточен |
| Чем GitHub Flow отличается от Git Flow? | Почти нет develop, одна основная ветка (main), проще и быстрее до прода |

---

## Кратко для ответа

Git Flow — модель с ветками **main** (прод) и **develop** (интеграция). **Feature** — от `develop`, в `develop`; **release** — от `develop`, в `main` и в `develop`; **hotfix** — от `main`, в `main` и в `develop`. Удобен при версионных релизах и нужде в отдельной стабилизации и хотфиксах. Для простых процессов часто используют упрощённые схемы (GitHub Flow, trunk-based).
