# Подходы к навигации и связям между приложениями (deep linking, URL-based и др.)

## Краткий ответ для собеседования

**Deep linking** — ссылка ведёт не на главную страницу, а на конкретный экран или состояние внутри приложения (например, товар, чат, настройки). **URL-based navigation** — навигация и состояние приложения привязаны к URL: по ссылке можно открыть тот же экран и контекст; удобно для шаринга и закладок. **URL-based handoff** — передача пользователя из одного контекста в другой (веб → приложение, один микрофронтенд → другой) через URL: одна ссылка открывает нужное место в нужном приложении. **Universal Links / App Links** — обычные веб-ссылки, которые на устройстве открывают нативное приложение, если оно установлено (глубокое связывание с нативным приложением). Отличия: deep linking — «куда ведёт ссылка»; URL-based navigation — «навигация и состояние по URL»; handoff — «передача между приложениями по URL».

---

## Зачем вообще связывать по URL

URL — это **адрес состояния**: что видит пользователь, на каком он экране, с какими данными. Если это состояние можно выразить в ссылке, то:

- Пользователь может **поделиться** ссылкой — другой откроет тот же экран.
- Можно **вернуться** по закладке или истории.
- Поисковики и внешние системы могут **вести прямо** на нужный экран (не только на главную).
- Разные приложения или части системы могут **передавать** пользователя друг другу одной ссылкой (handoff).

Подходы ниже — разные способы использовать URL для навигации и связей между проектами и приложениями.

---

## Deep linking (глубокое связывание)

### Что это

**Deep link** — ссылка, которая ведёт **не на главную**, а на конкретный экран, сущность или состояние внутри приложения.

Примеры: «открыть товар с id 123», «открыть чат с пользователем X», «открыть настройки → уведомления». Пользователь попадает сразу в нужное место, без ручной навигации с главной.

### Где бывает

- **Веб:** ссылка вида `https://app.com/product/123` или `https://app.com/chat?userId=456`. Роутер приложения по URL показывает нужный экран.
- **Мобильное приложение:** ссылка может открыть приложение (если установлено) на нужном экране, а не в магазин или на главную. Для этого используются схемы (myapp://product/123) или Universal Links / App Links.
- **Переход из веба в приложение:** реклама или письмо ведут на сайт; с сайта кнопка «Открыть в приложении» передаёт тот же контекст (например, тот же товар) в приложение — это тоже глубокое связывание.

### Зачем

Шаринг, рассылки, реклама, пуш-уведомления — чтобы пользователь попадал сразу в релевантное место, а не на главную. Плюс единая точка входа для разных источников (поиск, партнёры, внутренние ссылки).

**На собеседовании:** deep linking — когда ссылка ведёт на конкретный экран или сущность внутри приложения, а не на «стартовую» страницу.

---

## URL-based navigation (навигация по URL)

### Что это

**Навигация и состояние приложения привязаны к URL.** Переход на другой экран меняет URL; открытие той же ссылки позже (или на другом устройстве) восстанавливает тот же экран и контекст.

В SPA это обычно делают клиентским роутером (React Router, Vue Router и т.д.): при смене экрана обновляется path и/или query, при загрузке по URL роутер по этому URL рисует нужный экран. В MPA или SSR каждый URL — отдельная страница с сервера.

### Зачем

- **Шаримость** — скопировал ссылку, отправил — у другого откроется то же самое.
- **Закладки и история** — «назад», «вперёд», сохранённые ссылки работают предсказуемо.
- **SEO и внешние ссылки** — поисковики и партнёры могут ссылаться на конкретные разделы.

**Отличие от «просто deep linking»:** deep linking — про то, что ссылка ведёт «вглубь» приложения. URL-based navigation — про то, что **вся навигация** в приложении согласована с URL: каждый экран имеет адрес, и по адресу можно этот экран получить. Обычно оба используют вместе: deep link — это как раз URL на конкретный экран, а URL-based navigation — принцип «всегда держи URL в актуальном состоянии».

**На собеседовании:** навигация по URL — когда текущий экран и контекст определяются по адресу; по ссылке можно попасть в то же состояние и поделиться им.

---

## URL-based handoff (передача по URL)

### Что это

**Handoff** — передача пользователя из одного **контекста или приложения** в другой. **URL-based handoff** — когда эта передача делается **через одну ссылку**: по URL система понимает, куда открыть (веб или приложение, какой микрофронтенд, какой экран) и с какими параметрами.

Примеры:

- Пользователь на **сайте** нажимает «Открыть в приложении» — ему отдают ссылку (или автоматически открывают) с тем же путём и параметрами в **мобильном приложении** (deep link в приложение).
- В **микрофронтендах**: переход из зоны «Каталог» в зону «Корзина» — смена URL; по новому URL загружается другой микрофронтенд и показывается нужный экран. URL — контракт передачи между частями системы.
- **Единая ссылка** для партнёра: одна и та же ссылка на десктопе открывает веб-версию на нужной странице, на телефоне с установленным приложением — приложение на том же экране (через Universal Links или аналоги).

### Зачем

Один и тот же «адрес» (URL) работает в разных средах (веб, приложение, разные микросервисы/микрофронтенды). Не нужно плодить отдельные ссылки «для веба» и «для приложения» — одна ссылка, а система по контексту (устройство, наличие приложения) решает, куда вести пользователя.

**На собеседовании:** URL-based handoff — передача пользователя между приложениями или частями системы по одной ссылке; URL задаёт и место (куда открыть), и контекст (что показать).

---

## Universal Links (iOS) и App Links (Android)

### Что это

Механизмы в iOS и Android: **обычная HTTPS-ссылка** (например, `https://example.com/product/123`) при открытии на устройстве может **открыть нативное приложение** на соответствующем экране, если приложение установлено. Если не установлено — открывается веб-версия по той же ссылке.

То есть одна и та же ссылка работает и для веба, и для приложения; платформа решает по наличию приложения и настройкам (associated domains и т.д.), куда направить пользователя.

### Зачем

Не нужно говорить пользователю «скопируй ссылку и открой в приложении» — один тап по ссылке из письма, мессенджера или рекламы ведёт в приложение на нужный экран. Если приложения нет — пользователь остаётся на сайте. Для маркетинга и шаринга это удобно: одна ссылка на все платформы.

**Отличие от «просто» deep linking:** deep link через кастомную схему (myapp://...) часто работает только при открытии из своего приложения или специальной кнопки. Universal/App Links — обычные веб-ссылки, которые система сама может отдать приложению; их можно ставить куда угодно (реклама, SEO, письма).

---

## Другие связанные подходы

### Роутинг по файловой структуре (file-based routing)

Структура папок в проекте **совпадает с URL**: папка `pages/product/[id]` → маршрут `/product/123`. Так устроены Next.js, Nuxt и подобные. Связь с темой: навигация и deep linking естественно опираются на URL, а URL задаётся структурой проекта — один источник правды для маршрутов.

### Один URL на всё приложение (SPA) vs много URL (MPA)

В **SPA** часто один входной URL (например, `/`), а дальше маршруты меняются на клиенте без перезагрузки страницы (hash или history API). Deep linking при этом — когда у каждого «глубокого» экрана всё-таки свой URL (например, `/product/123`), чтобы на него можно было дать ссылку. В **MPA** каждый URL — отдельная страница с сервера; глубокое связывание — это просто ссылки на разные страницы.

### Shareable state (состояние в URL)

Часть состояния экрана кладут в **query-параметры или hash** (фильтры, табы, id выбранного элемента). Тогда «поделиться ссылкой» = поделиться состоянием; при открытии ссылки восстанавливается тот же вид. Это усиление идеи URL-based navigation: не только «какой экран», но и «с какими параметрами».

---

## Сводная таблица

| Подход | Суть | Когда говорить |
|--------|------|----------------|
| **Deep linking** | Ссылка ведёт на конкретный экран/сущность внутри приложения, а не на главную | Шаринг, рассылки, пуш, реклама — «попасть сразу в нужное место» |
| **URL-based navigation** | Навигация и состояние приложения привязаны к URL; по ссылке воспроизводится тот же экран | Закладки, история, шаринг, SEO — «каждый экран имеет адрес» |
| **URL-based handoff** | Передача пользователя между приложениями/частями системы по одной ссылке | Микрофронтенды, веб ↔ приложение, единая ссылка для партнёров |
| **Universal Links / App Links** | Обычная HTTPS-ссылка открывает нативное приложение на нужном экране, если оно установлено | Мобильные приложения, одна ссылка для веба и приложения |
| **Shareable state (в URL)** | Параметры экрана (фильтры, id) в query/hash — по ссылке восстанавливается полное состояние | «Поделиться» с тем же фильтром, табом, выбранным элементом |

---

## Вопросы на собеседовании

| Вопрос | Краткий ответ |
|--------|----------------|
| Что такое deep linking? | Ссылка ведёт на конкретный экран или сущность внутри приложения, а не на главную страницу. |
| Что такое URL-based navigation? | Навигация и состояние приложения привязаны к URL; по ссылке можно открыть тот же экран и контекст. |
| Чем deep linking отличается от URL-based navigation? | Deep linking — «куда ведёт ссылка» (вглубь приложения). URL-based navigation — принцип «каждый экран имеет URL, навигация синхронизирована с адресом». |
| Что такое URL-based handoff? | Передача пользователя из одного приложения или контекста в другой по одной ссылке; URL задаёт, куда открыть и что показать. |
| Что такое Universal Links / App Links? | Обычные веб-ссылки (HTTPS), которые на устройстве открывают нативное приложение на нужном экране, если оно установлено; иначе открывается веб. |
| Зачем нужен deep linking? | Чтобы по ссылке (из рассылки, рекламы, шаринга) пользователь попадал сразу на нужный экран, а не на главную. |

---

## Кратко для ответа

**Deep linking** — ссылка на конкретный экран/сущность внутри приложения. **URL-based navigation** — навигация и состояние привязаны к URL; по ссылке воспроизводится тот же экран. **URL-based handoff** — передача пользователя между приложениями или частями системы по одной ссылке. **Universal Links / App Links** — обычная HTTPS-ссылка открывает нативное приложение на нужном экране при наличии приложения. Deep linking — про «куда ведёт ссылка»; URL-based navigation — про «всё по URL»; handoff — про «передача между контекстами по URL».
