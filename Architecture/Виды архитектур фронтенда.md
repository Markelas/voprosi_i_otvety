# Виды архитектур фронтенда

## Краткий ответ для собеседования

Основные архитектуры: **Монолит** (всё в одном приложении), **Микрофронтенд** (независимые приложения, объединённые вместе), **Модульный монолит** (модули внутри одного приложения), **Компонентная** (переиспользуемые компоненты). Микрофронтенд: подходы — Module Federation, iframe, Web Components, server-side composition. Плюсы микрофронтенда: независимость команд, технологическая свобода. Минусы: сложность, дубликаты зависимостей, производительность.

---

## 1. Монолитная архитектура

### Что это

**Всё приложение — один проект**, один репозиторий, одна сборка, один деплой.

**Пример:**  
Весь фронтенд e-commerce (каталог, корзина, оплата, профиль) в одном React-приложении.

### Преимущества

- **Простота** — один проект, одна кодовая база
- **Легче разрабатывать** — всё в одном месте
- **Переиспользование кода** — общие компоненты, утилиты
- **Единая сборка** — один бандл, оптимизация проще

### Недостатки

- **Сложность при масштабировании** — огромная кодовая база
- **Зависимость команд** — изменения в одной части могут сломать другую
- **Долгая сборка** — чем больше код, тем дольше билд
- **Сложно обновлять технологии** — всё приложение на одном стеке

### Когда использовать

- Небольшие и средние проекты
- Одна команда
- Быстрый старт

---

## 2. Микрофронтенд (Micro Frontend)

### Что это

**Разделение фронтенда на независимые приложения** — каждая часть (feature) — отдельное приложение, которое объединяется на клиенте или сервере.

**Пример:**  
- Каталог — React (команда A)
- Корзина — Vue (команда B)
- Профиль — Angular (команда C)

Все три объединены в одном UI.

### Принципы

1. **Независимость команд** — каждая команда владеет своей частью
2. **Технологическая свобода** — разные фреймворки, версии
3. **Независимый деплой** — обновление одной части не требует пересборки всех
4. **Изоляция** — ошибка в одном модуле не роняет всё приложение

---

### Подходы к реализации

#### 1. Module Federation (Webpack 5)

**Что это:**  
Динамическая загрузка модулей из разных приложений.

**Пример:**

```js
// app1 (host)
module.exports = {
  plugins: [
    new ModuleFederationPlugin({
      name: 'app1',
      remotes: {
        app2: 'app2@http://localhost:3002/remoteEntry.js'
      }
    })
  ]
};

// Использование в app1
const RemoteButton = React.lazy(() => import('app2/Button'));
```

**Преимущества:**
- Загрузка по требованию
- Общие зависимости (один React для всех)

**Недостатки:**
- Привязка к Webpack
- Сложная настройка

---

#### 2. Iframe

**Что это:**  
Каждое приложение загружается в отдельный `<iframe>`.

**Преимущества:**
- Полная изоляция (стили, JS, DOM)
- Простота

**Недостатки:**
- Проблемы с производительностью
- Сложная коммуникация (postMessage)
- Плохая навигация (URL, история)

---

#### 3. Web Components

**Что это:**  
Каждое приложение — Web Component (Custom Element).

**Пример:**

```html
<catalog-widget></catalog-widget>
<cart-widget></cart-widget>
```

**Преимущества:**
- Стандарт браузера
- Изоляция через Shadow DOM
- Технологическая независимость

**Недостатки:**
- Сложность интеграции с React/Vue
- Ограниченная поддержка (старые браузеры)

---

#### 4. Server-Side Composition

**Что это:**  
Сервер собирает HTML из разных приложений и отдаёт как единую страницу.

**Примеры:**
- SSI (Server Side Includes)
- ESI (Edge Side Includes)
- Tailor, Podium (Node.js)

**Преимущества:**
- SEO — готовый HTML
- Быстрая первая загрузка

**Недостатки:**
- Нагрузка на сервер
- Сложная синхронизация

---

### Преимущества микрофронтенда

- **Независимость команд** — разные команды работают параллельно
- **Технологическая свобода** — каждая команда выбирает стек
- **Постепенная миграция** — переписывать по частям, а не всё сразу
- **Изоляция ошибок** — ошибка в одном модуле не роняет всё
- **Быстрый деплой** — обновление одной части без пересборки всех

### Недостатки микрофронтенда

- **Сложность** — координация, деплой, мониторинг
- **Дубликаты зависимостей** — несколько копий React, lodash и т.д.
- **Производительность** — больше JavaScript, медленнее загрузка
- **Согласованность UI** — сложнее поддерживать единый стиль
- **Сложность коммуникации** — передача данных между модулями

### Когда использовать

- Большие приложения
- Несколько команд
- Разные технологии (миграция)
- Независимые релизы

---

## 3. Модульный монолит

### Что это

**Одно приложение, но разделённое на модули** — каждый модуль независим внутри одного проекта.

**Пример:**

```
src/
  modules/
    catalog/
    cart/
    profile/
```

Каждый модуль — законченная фича (компоненты, стили, логика).

### Преимущества

- **Проще микрофронтенда** — один проект, один деплой
- **Модульность** — чёткие границы между фичами
- **Переиспользование** — общие компоненты

### Недостатки

- **Зависимость** — всё в одной кодовой базе
- **Единая технология** — нельзя миксовать React и Vue

### Когда использовать

- Средние и большие проекты
- Одна или несколько команд
- Нужна структура, но не микрофронтенд

---

## 4. Компонентная архитектура

### Что это

**Приложение состоит из переиспользуемых компонентов** — каждый компонент независим и самодостаточен.

**Примеры:**
- Atomic Design (атомы, молекулы, организмы)
- Component-Driven Development

**Инструменты:**
- Storybook — разработка компонентов в изоляции
- Bit — переиспользование компонентов между проектами

### Преимущества

- **Переиспользование** — компоненты в разных проектах
- **Изоляция** — легче тестировать
- **Согласованность** — единая UI-библиотека

### Недостатки

- **Overhead** — нужно продумывать API компонентов
- **Сложность** — для маленьких проектов избыточно

### Когда использовать

- Дизайн-системы
- Множество проектов с общим UI

---

## Сравнение

| Архитектура | Сложность | Масштабируемость | Команды | Технологии | Деплой |
|-------------|-----------|------------------|---------|------------|--------|
| **Монолит** | Низкая | Средняя | Одна | Одна | Один |
| **Микрофронтенд** | Высокая | Высокая | Много | Разные | Независимый |
| **Модульный монолит** | Средняя | Средняя | 1-3 | Одна | Один |
| **Компонентная** | Средняя | Высокая | Любые | Любые | Зависит |

---

## Вопросы на собеседовании

| Вопрос | Краткий ответ |
|--------|----------------|
| Что такое микрофронтенд? | Разделение фронтенда на независимые приложения, объединённые вместе |
| Зачем нужен микрофронтенд? | Независимость команд, технологическая свобода, изоляция ошибок |
| Как реализовать микрофронтенд? | Module Federation, iframe, Web Components, server-side composition |
| В чём минусы микрофронтенда? | Сложность, дубликаты зависимостей, производительность |
| Что такое Module Federation? | Webpack 5-технология для динамической загрузки модулей из разных приложений |
| Когда НЕ нужен микрофронтенд? | Маленькие проекты, одна команда, простая архитектура |

---

## Кратко для ответа

Архитектуры: **Монолит** (всё в одном), **Микрофронтенд** (независимые приложения), **Модульный монолит** (модули внутри одного), **Компонентная** (переиспользуемые компоненты). Микрофронтенд: независимость команд, технологическая свобода, независимый деплой; реализация — Module Federation, iframe, Web Components, server-side; минусы — сложность, дубликаты, производительность.
