## üå≥ Tree Shaking

**Tree shaking** ‚Äî —ç—Ç–æ —Ç–µ—Ö–Ω–∏–∫–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏, –∫–æ—Ç–æ—Ä–∞—è —É–¥–∞–ª—è–µ—Ç –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –∫–æ–¥ (dead code) –∏–∑ —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ –±–∞–Ω–¥–ª–∞ –≤–æ –≤—Ä–µ–º—è —Å–±–æ—Ä–∫–∏.

–ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –æ—Ç –∞–Ω–∞–ª–æ–≥–∏–∏ —Å –¥–µ—Ä–µ–≤–æ–º: "–≤—Å—Ç—Ä—è—Ö–∏–≤–∞–Ω–∏–µ –¥–µ—Ä–µ–≤–∞" —É–¥–∞–ª—è–µ—Ç –º—ë—Ä—Ç–≤—ã–µ –ª–∏—Å—Ç—å—è (–Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –∫–æ–¥).

---

### üéØ –¶–µ–ª—å

–£–º–µ–Ω—å—à–∏—Ç—å —Ä–∞–∑–º–µ—Ä —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ –±–∞–Ω–¥–ª–∞, —É–¥–∞–ª–∏–≤ –∫–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è.

---

### üîß –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. **–ê–Ω–∞–ª–∏–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π** ‚Äî —Å–±–æ—Ä—â–∏–∫ (Webpack, Rollup, Vite) –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∏–º–ø–æ—Ä—Ç—ã –∏ —ç–∫—Å–ø–æ—Ä—Ç—ã
2. **–ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –≥—Ä–∞—Ñ–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π** ‚Äî –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –∫–∞–∫–∏–µ –º–æ–¥—É–ª–∏ –∏ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–µ–∞–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è
3. **–£–¥–∞–ª–µ–Ω–∏–µ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–≥–æ –∫–æ–¥–∞** ‚Äî –∏—Å–∫–ª—é—á–∞–µ—Ç –∏–∑ –±–∞–Ω–¥–ª–∞ –≤—Å—ë, —á—Ç–æ –Ω–µ –¥–æ—Å—Ç–∏–∂–∏–º–æ –∏–∑ —Ç–æ—á–∫–∏ –≤—Ö–æ–¥–∞

---

### ‚úÖ –ß—Ç–æ –Ω—É–∂–Ω–æ –¥–ª—è —Ä–∞–±–æ—Ç—ã

#### 1. ES6 –º–æ–¥—É–ª–∏ (import/export)

Tree shaking —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å **ES6 –º–æ–¥—É–ª—è–º–∏**, –Ω–µ —Å CommonJS.

```js
// ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç ‚Äî ES6 –º–æ–¥—É–ª–∏
import { add, subtract } from './math';
export const multiply = (a, b) => a * b;

// ‚ùå –ù–ï —Ä–∞–±–æ—Ç–∞–µ—Ç ‚Äî CommonJS
const { add } = require('./math');
module.exports = { multiply };
```

#### 2. –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑

–°–±–æ—Ä—â–∏–∫ –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥:

```js
// ‚úÖ –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∏–º–ø–æ—Ä—Ç ‚Äî —Ä–∞–±–æ—Ç–∞–µ—Ç
import { add } from './math';

// ‚ùå –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –∏–º–ø–æ—Ä—Ç ‚Äî –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è tree shaking
const module = await import('./math');
```

#### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–±–æ—Ä—â–∏–∫–∞

**Webpack:**
```js
// webpack.config.js
module.exports = {
  mode: 'production', // –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–∫–ª—é—á–∞–µ—Ç tree shaking
  optimization: {
    usedExports: true,
    sideEffects: false
  }
};
```

**Vite:**
```js
// vite.config.js
export default {
  build: {
    rollupOptions: {
      output: {
        manualChunks: undefined
      }
    }
  }
};
```

---

### üí° –ü—Ä–∏–º–µ—Ä—ã

#### –ü—Ä–∏–º–µ—Ä 1: –£–¥–∞–ª–µ–Ω–∏–µ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π

```js
// math.js
export const add = (a, b) => a + b;
export const subtract = (a, b) => a - b;
export const multiply = (a, b) => a * b;
export const divide = (a, b) => a / b;

// app.js
import { add } from './math'; // —Ç–æ–ª—å–∫–æ add –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è

// –†–µ–∑—É–ª—å—Ç–∞—Ç: subtract, multiply, divide –±—É–¥—É—Ç —É–¥–∞–ª–µ–Ω—ã –∏–∑ –±–∞–Ω–¥–ª–∞
```

#### –ü—Ä–∏–º–µ—Ä 2: –£–¥–∞–ª–µ–Ω–∏–µ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –º–æ–¥—É–ª–µ–π

```js
// utils.js
export const formatDate = (date) => { /* ... */ };
export const formatCurrency = (amount) => { /* ... */ };
export const validateEmail = (email) => { /* ... */ };

// app.js
import { formatDate } from './utils'; // —Ç–æ–ª—å–∫–æ formatDate –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è

// –†–µ–∑—É–ª—å—Ç–∞—Ç: formatCurrency –∏ validateEmail —É–¥–∞–ª–µ–Ω—ã
```

#### –ü—Ä–∏–º–µ—Ä 3: –ß–∞—Å—Ç–∏—á–Ω—ã–π –∏–º–ø–æ—Ä—Ç –∏–∑ –±–∏–±–ª–∏–æ—Ç–µ–∫

```js
// ‚ùå –ü–ª–æ—Ö–æ ‚Äî –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –≤—Å—é –±–∏–±–ª–∏–æ—Ç–µ–∫—É
import _ from 'lodash';
const result = _.add(1, 2);

// ‚úÖ –•–æ—Ä–æ—à–æ ‚Äî –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é
import { add } from 'lodash';
const result = add(1, 2);

// –†–µ–∑—É–ª—å—Ç–∞—Ç: –≤ –±–∞–Ω–¥–ª –ø–æ–ø–∞–¥—ë—Ç —Ç–æ–ª—å–∫–æ —Ñ—É–Ω–∫—Ü–∏—è add, –∞ –Ω–µ –≤—Å—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ lodash
```

---

### ‚ö†Ô∏è –ß—Ç–æ –ù–ï —É–¥–∞–ª—è–µ—Ç—Å—è

#### 1. –ü–æ–±–æ—á–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã (Side Effects)

–ö–æ–¥ —Å –ø–æ–±–æ—á–Ω—ã–º–∏ —ç—Ñ—Ñ–µ–∫—Ç–∞–º–∏ –Ω–µ —É–¥–∞–ª—è–µ—Ç—Å—è, –¥–∞–∂–µ –µ—Å–ª–∏ –Ω–µ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é:

```js
// side-effect.js
console.log('–≠—Ç–æ—Ç –∫–æ–¥ –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ –º–æ–¥—É–ª—è');
window.myGlobal = 'value';

// app.js
import './side-effect'; // –º–æ–¥—É–ª—å –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω, –Ω–æ –Ω–∏—á–µ–≥–æ –Ω–µ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç
// –ö–æ–¥ –≤—Å—ë —Ä–∞–≤–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è –∏–∑-–∑–∞ –ø–æ–±–æ—á–Ω—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤
```

**–†–µ—à–µ–Ω–∏–µ:** –ü–æ–º–µ—Ç–∏—Ç—å —Ñ–∞–π–ª—ã –±–µ–∑ –ø–æ–±–æ—á–Ω—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ –≤ `package.json`:

```json
{
  "sideEffects": false,
  // –∏–ª–∏ —É–∫–∞–∑–∞—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ñ–∞–π–ª—ã
  "sideEffects": [
    "*.css",
    "./src/polyfills.js"
  ]
}
```

#### 2. –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –∏–º–ø–æ—Ä—Ç—ã

```js
// ‚ùå –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è tree shaking
const module = await import('./math');
const { add } = module;
```

#### 3. CommonJS –º–æ–¥—É–ª–∏

```js
// ‚ùå –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
const { add } = require('./math');
```

#### 4. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ eval –∏–ª–∏ —Å—Ç—Ä–æ–∫–æ–≤—ã–µ –∏–º–ø–æ—Ä—Ç—ã

```js
// ‚ùå –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
const moduleName = './math';
import(moduleName);
```

---

### üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã Tree Shaking

#### 1. –ê–Ω–∞–ª–∏–∑ –±–∞–Ω–¥–ª–∞

```bash
# Webpack Bundle Analyzer
npm install --save-dev webpack-bundle-analyzer

# –í webpack.config.js
const BundleAnalyzerPlugin = require('webpack-bundle-analyzer').BundleAnalyzerPlugin;

module.exports = {
  plugins: [
    new BundleAnalyzerPlugin()
  ]
};
```

#### 2. –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–æ–≤

```bash
# –î–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
npm run build
# –†–∞–∑–º–µ—Ä: 500 KB

# –ü–æ—Å–ª–µ –≤–∫–ª—é—á–µ–Ω–∏—è tree shaking
npm run build
# –†–∞–∑–º–µ—Ä: 200 KB
```

---

### üì¶ Tree Shaking –≤ –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫–∞—Ö

#### Lodash

```js
// ‚ùå –ü–ª–æ—Ö–æ ‚Äî –≤—Å—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞
import _ from 'lodash';

// ‚úÖ –•–æ—Ä–æ—à–æ ‚Äî —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
import debounce from 'lodash/debounce';
// –∏–ª–∏
import { debounce } from 'lodash-es';
```

#### Material-UI / MUI

```js
// ‚ùå –ü–ª–æ—Ö–æ
import { Button, TextField } from '@mui/material';

// ‚úÖ –•–æ—Ä–æ—à–æ ‚Äî tree shaking —Ä–∞–±–æ—Ç–∞–µ—Ç
import Button from '@mui/material/Button';
import TextField from '@mui/material/TextField';
```

#### React

```js
// ‚úÖ React –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç tree shaking
import { useState, useEffect } from 'react';
// –ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ö—É–∫–∏ –Ω–µ –ø–æ–ø–∞–¥—É—Ç –≤ –±–∞–Ω–¥–ª
```

---

### üéØ Best Practices

1. **–ò—Å–ø–æ–ª—å–∑—É–π –∏–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–µ —ç–∫—Å–ø–æ—Ä—Ç—ã:**
```js
// ‚úÖ –•–æ—Ä–æ—à–æ
export const add = () => {};
export const subtract = () => {};

// ‚ùå –ü–ª–æ—Ö–æ (–¥–ª—è tree shaking)
export default {
  add: () => {},
  subtract: () => {}
};
```

2. **–ò–∑–±–µ–≥–∞–π –ø–æ–±–æ—á–Ω—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ –≤ –º–æ–¥—É–ª—è—Ö:**
```js
// ‚ùå –ü–ª–æ—Ö–æ
export const add = (a, b) => a + b;
console.log('–ú–æ–¥—É–ª—å –∑–∞–≥—Ä—É–∂–µ–Ω'); // –ø–æ–±–æ—á–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç

// ‚úÖ –•–æ—Ä–æ—à–æ
export const add = (a, b) => a + b;
```

3. **–ò—Å–ø–æ–ª—å–∑—É–π —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –∏–º–ø–æ—Ä—Ç—ã:**
```js
// ‚úÖ –•–æ—Ä–æ—à–æ
import { add } from './math';

// ‚ùå –ü–ª–æ—Ö–æ (–¥–ª—è tree shaking)
const math = await import('./math');
```

4. **–ü–æ–º–µ—á–∞–π —Ñ–∞–π–ª—ã –±–µ–∑ –ø–æ–±–æ—á–Ω—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤:**
```json
{
  "sideEffects": false
}
```

---

### üîÑ Tree Shaking vs Code Splitting

| Tree Shaking | Code Splitting |
|--------------|----------------|
| –£–¥–∞–ª—è–µ—Ç –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –∫–æ–¥ | –†–∞–∑–¥–µ–ª—è–µ—Ç –∫–æ–¥ –Ω–∞ —á–∞–Ω–∫–∏ |
| –£–º–µ–Ω—å—à–∞–µ—Ç —Ä–∞–∑–º–µ—Ä –±–∞–Ω–¥–ª–∞ | –£–ª—É—á—à–∞–µ—Ç –≤—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏ |
| –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ —ç—Ç–∞–ø–µ —Å–±–æ—Ä–∫–∏ | –†–∞–±–æ—Ç–∞–µ—Ç –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è |
| –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ | –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –∏–º–ø–æ—Ä—Ç—ã |

**–û–Ω–∏ –¥–æ–ø–æ–ª–Ω—è—é—Ç –¥—Ä—É–≥ –¥—Ä—É–≥–∞:**
- Tree shaking —É–º–µ–Ω—å—à–∞–µ—Ç —Ä–∞–∑–º–µ—Ä –∫–∞–∂–¥–æ–≥–æ —á–∞–Ω–∫–∞
- Code splitting —Ä–∞–∑–¥–µ–ª—è–µ—Ç –∫–æ–¥ –Ω–∞ —á–∞—Å—Ç–∏ –¥–ª—è –ª–µ–Ω–∏–≤–æ–π –∑–∞–≥—Ä—É–∑–∫–∏

---

### üí° –ò—Ç–æ–≥:

- **Tree shaking** ‚Äî —É–¥–∞–ª–µ–Ω–∏–µ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–≥–æ –∫–æ–¥–∞ –∏–∑ –±–∞–Ω–¥–ª–∞
- **–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:** ES6 –º–æ–¥—É–ª–∏, —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑, –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–±–æ—Ä—â–∏–∫–∞
- **–ù–µ —É–¥–∞–ª—è–µ—Ç—Å—è:** –∫–æ–¥ —Å –ø–æ–±–æ—á–Ω—ã–º–∏ —ç—Ñ—Ñ–µ–∫—Ç–∞–º–∏, –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –∏–º–ø–æ—Ä—Ç—ã, CommonJS
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –º–µ–Ω—å—à–∏–π —Ä–∞–∑–º–µ—Ä –±–∞–Ω–¥–ª–∞ –∏ –±—ã—Å—Ç—Ä–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è





