# Виды тестирования во фронтенде

## Краткий ответ для собеседования

Во фронтенде используют **unit-тесты** (отдельные функции/компоненты в изоляции), **интеграционные** (взаимодействие модулей/API), **компонентные** (рендер и поведение UI-компонентов), **e2e** (полный сценарий в браузере от действия пользователя до результата). Реже — **snapshot**, **визуальные**, **доступность (a11y)**. Unit и компонентные — быстрые, много; e2e — медленные, мало, но проверяют реальное поведение. На практике сочетают: много unit/компонентных, меньше интеграционных, несколько ключевых e2e.

---

## Зачем тестирование во фронтенде

- Находить баги до продакшена.
- Не ломать уже работающее при рефакторинге и при добавлении фич.
- Делать код и контракты (API, компоненты) более предсказуемыми.
- Ускорять онбординг: тесты показывают, как система должна вести себя.

---

## 1. Unit-тесты (модульные)

**Что проверяют:** одну единицу кода в изоляции — функцию, утилиту, хук (без реального DOM и сети). Зависимости подменяют моками.

**Примеры:** чистые функции (форматирование, валидация), редьюсеры, селекторы, хуки с моками.

**Инструменты:** Jest, Vitest, Mocha.

**Плюсы:** быстрые, много тестов, легко локализовать падение.

**Минусы:** не проверяют, что модули правильно склеены и что UI ведёт себя корректно в браузере.

**Во фронтенде:** основа «пирамиды» — много unit-тестов на логику и простые части.

---

## 2. Компонентные тесты (Component tests)

**Что проверяют:** отдельный UI-компонент: рендер, пропсы, пользовательские действия (клик, ввод), состояние и вызовы колбэков. DOM обычно эмулируется (jsdom) или в реальном браузере (Playwright Component, Cypress Component). Сеть и роутинг часто мокают.

**Примеры:** кнопка с loading, форма с валидацией, список с выбором элемента.

**Инструменты:** React Testing Library, Vue Test Utils, Jest + jsdom, Playwright Component Testing, Cypress Component Testing.

**Плюсы:** быстрее e2e, проверяют поведение компонента и его контракт (props, events).

**Минусы:** не проверяют полный путь пользователя и реальный бэкенд; возможны расхождения с продакшеном (другая среда).

**Во фронтенде:** средний слой пирамиды — много тестов на ключевые компоненты и их сценарии.

---

## 3. Интеграционные тесты

**Что проверяют:** взаимодействие нескольких модулей или с реальным/подставным API. Без полного UI или с упрощённым. Примеры: форма отправляет запрос с нужными данными, стор обновляется после ответа API.

**Инструменты:** Jest + моки fetch/API, MSW (Mock Service Worker), тестовый сервер.

**Плюсы:** ловят ошибки в «стыках» модулей и в контракте с API.

**Минусы:** медленнее unit, сложнее настраивать и поддерживать моки/контракты.

**Во фронтенде:** меньше, чем unit и компонентных; фокус на критичных сценариях (логин, отправка формы, загрузка данных).

---

## 4. E2E-тесты (end-to-end)

**Что проверяют:** полный сценарий от действия пользователя до результата в реальном браузере: открытие страницы, клики, ввод, навигация, проверка контента и ответов сервера. Часто против тестового/стаб-бэкенда.

**Примеры:** «логин → переход в профиль → редактирование имени → сохранение», «добавление в корзину → оформление заказа».

**Инструменты:** Playwright, Cypress, Selenium.

**Плюсы:** максимально близко к реальному использованию, ловят проблемы интеграции, сети, рендера.

**Минусы:** медленные, хрупкие (селекторы, тайминги), сложнее поддерживать; их обычно мало и на критичные сценарии.

**Во фронтенде:** верхушка пирамиды — несколько стабильных e2e на главные сценарии.

---

## 5. Snapshot-тесты

**Что проверяют:** неизменность вывода компонента (разметка, дерево) или структуры данных. При первом запуске сохраняется «снимок»; при следующих запусках текущий результат сравнивается с ним. Падение — если вывод изменился.

**Плюсы:** быстро ловят случайные изменения разметки или структуры.

**Минусы:** много ложных срабатываний при легитимных изменениях; snapshot нужно часто обновлять; не проверяют логику и поведение.

**Во фронтенде:** используют выборочно (критичные компоненты, контракты данных), не как основу тестирования.

---

## 6. Визуальные тесты (Visual regression)

**Что проверяют:** совпадение внешнего вида страницы/компонента с эталонным скриншотом. Падение — при отличии пикселей.

**Инструменты:** Percy, Chromatic, Playwright/Cypress со скриншотами.

**Плюсы:** ловят визуальные регрессии (сдвиги, обрезание, сломанные стили).

**Минусы:** хрупкость из-за шрифтов, разрешения, анимаций; нужна дисциплина по эталонам и окружению.

**Во фронтенде:** по необходимости для дизайн-систем и ключевых экранов.

---

## 7. Тестирование доступности (a11y)

**Что проверяют:** соответствие критериям доступности (контраст, семантика, ARIA, фокус, клавиатура). Часто автоматизируют правилами (axe-core, jest-axe) внутри unit/компонентных/e2e.

**Плюсы:** помогают соблюдать a11y и ловить типичные ошибки на ранних этапах.

**Минусы:** не покрывают все сценарии; часть проверок остаётся ручной.

**Во фронтенде:** встраивают в компонентные и e2e тесты; при необходимости отдельные a11y-чеки.

---

## Пирамида тестов во фронтенде

- **Основание — unit:** много быстрых тестов на функции, хуки, редьюсеры, утилиты.
- **Середина — компонентные (и часть интеграционных):** проверка компонентов и их взаимодействия с данными/API.
- **Верхушка — e2e:** мало медленных тестов на критичные пользовательские сценарии.

Цель: быстро находить большинство багов unit- и компонентными тестами, а e2e проверять, что система в целом работает для пользователя.

---

## Вопросы на собеседовании

| Вопрос | Краткий ответ |
|--------|----------------|
| Какие виды тестирования знаешь во фронтенде? | Unit, компонентные, интеграционные, e2e, snapshot, визуальные, a11y. |
| В чём разница unit и e2e? | Unit — одна единица кода в изоляции, быстро; e2e — полный сценарий в браузере, медленно, но реалистично. |
| Что такое компонентный тест? | Проверка одного UI-компонента: рендер, пропсы, действия пользователя, часто с моками. |
| Зачем e2e, если есть unit? | Unit не проверяют полный путь пользователя и интеграцию с сетью/бэкендом; e2e проверяют реальное поведение. |
| Что такое snapshot-тест? | Сравнение текущего вывода (разметка/данные) с сохранённым снимком; падает при любом изменении. |
| Что такое пирамида тестов? | Много unit, меньше интеграционных/компонентных, мало e2e — баланс скорости и покрытия реальных сценариев. |

---

## Кратко для ответа

Во фронтенде используют unit (функции, логика в изоляции), компонентные (UI-компоненты и их поведение), интеграционные (модули + API), e2e (полный сценарий в браузере), а также snapshot, визуальные и a11y по необходимости. Unit и компонентные — основа, быстрые и много; e2e — мало, медленные, на критичные сценарии. Пирамида: много unit, меньше компонентных/интеграционных, несколько e2e.
