# Виды рендеринга (SSG, ISR, SSR, CSR)

## Краткий ответ для собеседования

**CSR** (Client-Side Rendering) — рендеринг на клиенте (браузере), быстрая навигация, но медленная первая загрузка и плохое SEO. **SSR** (Server-Side Rendering) — рендеринг на сервере для каждого запроса, быстрая первая загрузка, хорошее SEO, но нагрузка на сервер. **SSG** (Static Site Generation) — генерация HTML на этапе сборки, моментальная загрузка, но данные статичны. **ISR** (Incremental Static Regeneration) — статика + переге нерация по требованию или по времени, баланс между SSG и SSR.

---

## CSR — Client-Side Rendering

### Что это

**Рендеринг на стороне клиента** — браузер получает пустой HTML + JavaScript, затем JavaScript строит DOM и рендерит страницу.

### Как работает

1. Сервер отдаёт минимальный HTML (почти пустой):

```html
<div id="root"></div>
<script src="bundle.js"></script>
```

2. Браузер загружает и выполняет JavaScript
3. JavaScript рендерит компоненты и вставляет в DOM
4. Пользователь видит страницу

### Преимущества

- **Быстрая навигация** — после загрузки JS переходы мгновенные (SPA)
- **Интерактивность** — всё на клиенте, богатый UX
- **Простая инфраструктура** — не нужен сервер рендеринга, статика на CDN

### Недостатки

- **Медленная первая загрузка (FCP)** — нужно загрузить и выполнить JS
- **Плохое SEO** — поисковики видят пустой HTML (хотя Google индексирует JS, но медленнее)
- **Проблемы на слабых устройствах** — тяжёлый JS долго выполняется

### Когда использовать

- **SPA (Single Page Applications)** — админки, дашборды, личные кабинеты
- **SEO не важен** — внутренние инструменты, приложения за авторизацией
- **Много интерактивности** — сложные интерфейсы, реал-тайм обновления

**Примеры:** Create React App (CRA), Vite (по умолчанию).

---

## SSR — Server-Side Rendering

### Что это

**Рендеринг на стороне сервера** — сервер рендерит HTML для каждого запроса, отправляет готовую страницу браузеру.

### Как работает

1. **Запрос приходит на сервер** — пользователь заходит на `/page`
2. **Сервер рендерит React** — выполняет `renderToString()`, получает HTML
3. **Сервер отдаёт HTML** — браузер сразу видит контент
4. **Гидрация (Hydration)** — JS загружается, React "оживляет" HTML (добавляет обработчики событий)

### Преимущества

- **Быстрая первая загрузка (FCP)** — пользователь сразу видит контент
- **Хорошее SEO** — поисковики видят готовый HTML
- **Работает без JS** — контент виден, даже если JS не загрузился

### Недостатки

- **Нагрузка на сервер** — сервер рендерит на каждый запрос
- **Медленнее статики** — рендеринг занимает время (100-500ms)
- **TTFB (Time To First Byte)** — может быть высоким (сервер обрабатывает запрос)

### Когда использовать

- **Динамический контент** — данные меняются часто (новости, профили пользователей)
- **SEO важен** — блоги, интернет-магазины, маркетинговые сайты
- **Персонализация** — контент зависит от пользователя (авторизация, геолокация)

**Примеры:** Next.js (getServerSideProps), Remix.

---

## SSG — Static Site Generation

### Что это

**Генерация статических страниц** — HTML генерируется **на этапе сборки** (build time), затем хранится на CDN.

### Как работает

1. **Во время сборки** (`npm run build`) — генерируются все HTML-страницы
2. **Деплой на CDN** — готовые HTML-файлы
3. **Запрос пользователя** — CDN моментально отдаёт HTML

### Преимущества

- **Моментальная загрузка** — HTML уже готов, CDN рядом с пользователем
- **Отличное SEO** — готовый HTML, индексируется мгновенно
- **Масштабируемость** — нет нагрузки на сервер, CDN справляется с любым трафиком
- **Безопасность** — нет сервера — нет атак на сервер

### Недостатки

- **Статичные данные** — если данные изменились, нужно пересобрать сайт
- **Долгий билд** — для тысяч страниц сборка может занять минуты/часы
- **Не подходит для динамики** — нельзя показать контент, зависящий от пользователя

### Когда использовать

- **Статичный контент** — документация, блоги, лендинги, портфолио
- **Редко меняющиеся данные** — контент обновляется раз в день/неделю
- **Максимальная производительность** — нужна молниеносная загрузка

**Примеры:** Next.js (getStaticProps), Gatsby, Astro.

---

## ISR — Incremental Static Regeneration

### Что это

**Инкрементальная статическая регенерация** — гибрид SSG и SSR. Страницы генерируются статически, но **автоматически обновляются** по расписанию или по требованию.

### Как работает (Next.js)

```js
export async function getStaticProps() {
  const data = await fetch('...');
  return {
    props: { data },
    revalidate: 60 // пересоздать страницу через 60 секунд
  };
}
```

**Процесс:**
1. **Первый запрос** — отдаётся старая статическая версия
2. **В фоне** — регенерируется новая версия (если прошло > 60 сек)
3. **Следующий запрос** — получает обновлённую версию

### Преимущества

- **Скорость SSG** + **свежесть SSR** — страницы быстрые, но данные обновляются
- **Масштабируемость** — нет нагрузки на каждый запрос (регенерация в фоне)
- **Гибкость** — можно настроить интервал обновления

### Недостатки

- **Задержка обновлений** — пользователь может видеть старые данные (stale-while-revalidate)
- **Сложность** — нужно понимать, когда и как обновлять

### Когда использовать

- **Частично динамический контент** — блоги с комментариями, каталоги товаров
- **Баланс между скоростью и свежестью** — данные обновляются, но не на каждый запрос
- **Большие сайты** — тысячи страниц, не хочется пересобирать всё при изменении одной

**Примеры:** Next.js (getStaticProps + revalidate).

---

## Сравнение

| Параметр | CSR | SSR | SSG | ISR |
|----------|-----|-----|-----|-----|
| **Рендеринг** | На клиенте | На сервере (каждый запрос) | При сборке | При сборке + регенерация |
| **FCP (First Contentful Paint)** | Медленно | Быстро | Очень быстро | Очень быстро |
| **SEO** | Плохое | Отличное | Отличное | Отличное |
| **Свежесть данных** | Актуальные | Актуальные | Статичные | Частично актуальные |
| **Нагрузка на сервер** | Нет | Высокая | Нет | Низкая (только регенерация) |
| **Масштабируемость** | Отлично | Средне | Отлично | Отлично |
| **Использование** | SPA, админки | Динамика, SEO | Статика, блоги | Полудинамика |

---

## Вопросы на собеседовании

| Вопрос | Краткий ответ |
|--------|----------------|
| Что такое CSR? | Рендеринг на клиенте, браузер строит DOM через JS |
| Что такое SSR? | Рендеринг на сервере для каждого запроса, отдаётся готовый HTML |
| Что такое SSG? | Генерация HTML при сборке, статические файлы на CDN |
| Что такое ISR? | SSG + автоматическое обновление страниц по расписанию или по требованию |
| В чём разница SSR и SSG? | SSR рендерит на каждый запрос, SSG — один раз при сборке |
| Когда использовать CSR? | SPA, админки, SEO не важен |
| Когда использовать SSR? | Динамический контент, SEO важен |
| Когда использовать SSG? | Статичный контент, блоги, максимальная скорость |
| Когда использовать ISR? | Баланс между скоростью и свежестью, полудинамический контент |
| Что такое гидрация? | "Оживление" HTML в браузере — JS добавляет обработчики событий |

---

## Кратко для ответа

**CSR** — рендеринг на клиенте, медленная первая загрузка, плохое SEO, подходит для SPA. **SSR** — рендеринг на сервере для каждого запроса, быстрая загрузка, хорошее SEO, нагрузка на сервер. **SSG** — генерация HTML при сборке, моментальная загрузка, отличное SEO, данные статичны. **ISR** — SSG + регенерация по расписанию, баланс между скоростью и свежестью.
