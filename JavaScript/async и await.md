## ‚ö° async –∏ await

**`async/await`** ‚Äî —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏–π —Å–∞—Ö–∞—Ä –Ω–∞–¥ –ø—Ä–æ–º–∏—Å–∞–º–∏. –û–Ω –¥–µ–ª–∞–µ—Ç –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –∫–æ–¥ –≤—ã–≥–ª—è–¥—è—â–∏–º –∫–∞–∫ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π, —É–ø—Ä–æ—â–∞—è —á—Ç–µ–Ω–∏–µ –∏ –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫.

---

### üîë –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã:

1. **–ö–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ `async`** –¥–µ–ª–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é –≤—Å–µ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞—é—â–µ–π `Promise`. –ï—Å–ª–∏ –≤–µ—Ä–Ω—É—Ç—å –æ–±—ã—á–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ ‚Üí –æ–Ω–æ –æ–±–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è –≤ `Promise.resolve(value)`.

2. **`await`** ‚Äî –ø—Ä–∏–æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ `async` —Ñ—É–Ω–∫—Ü–∏–∏, –ø–æ–∫–∞ –ø—Ä–æ–º–∏—Å –Ω–µ –∑–∞–≤–µ—Ä—à–∏—Ç—Å—è (`fulfilled`/`rejected`).

‚ö†Ô∏è –≠—Ç–æ **–Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç event loop**.

3. –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ —Ñ—É–Ω–∫—Ü–∏—è –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–æ–º–∏—Å–∞.

---

### üìù –ü—Ä–∏–º–µ—Ä—ã:

```js
async function fetchData() {
  const response = await fetch('/api/data');
  const data = await response.json();
  return data;
}
```

---

### üöÄ –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ

–ù–µ—Å–∫–æ–ª—å–∫–æ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã—Ö –ø—Ä–æ–º–∏—Å–æ–≤ –ª—É—á—à–µ –∑–∞–ø—É—Å–∫–∞—Ç—å **–ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ**, –∞ –Ω–µ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ:

```js
// ‚úÖ –•–æ—Ä–æ—à–æ ‚Äî –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ
const [a, b] = await Promise.all([fetch(url1), fetch(url2)]);

// ‚ùå –ü–ª–æ—Ö–æ ‚Äî –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ (–º–µ–¥–ª–µ–Ω–Ω–µ–µ)
const a = await fetch(url1);
const b = await fetch(url2);
```

---

### ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã:

#### –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `await` –Ω–µ —Å –ø—Ä–æ–º–∏—Å–æ–º, –∞ —Å –æ–±—ã—á–Ω—ã–º –∑–Ω–∞—á–µ–Ω–∏–µ–º
JS —Å—Ä–∞–∑—É –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —ç—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ, –±–µ–∑ –æ–∂–∏–¥–∞–Ω–∏—è. JS –ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º –¥–µ–ª–∞–µ—Ç `Promise.resolve(42)`, –Ω–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–∏—Ö–æ–¥–∏—Ç –º–≥–Ω–æ–≤–µ–Ω–Ω–æ, –ø–æ—Ç–æ–º—É —á—Ç–æ —ç—Ç–æ –Ω–µ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è.

```js
async function example() {
  const num = await 42;
  console.log(num); // 42
}
```

#### –ë–µ–∑ `await` ¬´–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –ø—Ä–æ–º–∏—Å, –∞ –Ω–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç¬ª
–ï—Å–ª–∏ –∑–∞–±—ã–ª –Ω–∞–ø–∏—Å–∞—Ç—å `await`, –ø–æ–ª—É—á–∏—à—å –ø—Ä–æ–º–∏—Å, –∞ –Ω–µ –∑–Ω–∞—á–µ–Ω–∏–µ.

```js
async function getData() { 
  return "OK"; 
}

async function main() {
  const data = getData(); // ‚Üê –±–µ–∑ await
  console.log(data); // Promise { 'OK' } ‚Äî –Ω–µ —Å—Ç—Ä–æ–∫–∞!
}
```

#### `await` –º–æ–∂–Ω–æ –ø–∏—Å–∞—Ç—å —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ `async` —Ñ—É–Ω–∫—Ü–∏–∏
–ò–Ω–∞—á–µ —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞:

```js
const data = await fetch('/api'); // ‚ùå SyntaxError
```

üü¢ **–ò—Å–∫–ª—é—á–µ–Ω–∏–µ** ‚Äî –µ—Å–ª–∏ —ç—Ç–æ ES-–º–æ–¥—É–ª—å (`type="module"` –≤ HTML –∏–ª–∏ `.mjs` —Ñ–∞–π–ª), —Ç–æ–≥–¥–∞ top-level `await` —Ä–∞–∑—Ä–µ—à—ë–Ω.

#### ‚ùå –ù–ï –ò–°–ü–û–õ–¨–ó–û–í–ê–¢–¨ `await` –≤–Ω—É—Ç—Ä–∏ `forEach`

```js
arr.forEach(async (item) => await doSomething(item)); // ‚ùå –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç!
```

‚úÖ –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `for...of`:

```js
for (const item of arr) {
  await doSomething(item); // ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç!
}
```
